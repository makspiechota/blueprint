type: user-story
id: product-separation
productName: test
version: '1.0'
last_updated: '2026-01-14'
name: Separate Blueprint and Software Factory in codebase
description: >-
  As a developer, I need Blueprint and Software Factory code to be in separate directories
  with a mode switcher in the UI, so that both products can be developed independently
  while sharing common components.
status: completed
acceptance_criteria:
  - Shared components extracted to shared/ directory
  - Blueprint-specific code in blueprint/ directory
  - Software Factory code in software-factory/ directory
  - Mode switcher visible in header (where logo is)
  - Clicking mode switcher toggles between Blueprint and Software Factory
  - Each mode has its own navigation menu
  - Mode preference persisted in localStorage
  - "Separate backends on different ports (Blueprint: 3001, Factory: 3002)"
  - "Separate WebSocket servers (Blueprint: 8080, Factory: 8081)"
  - Frontend switches API base URL based on mode
tasks:
  - id: extract-shared
    name: Extract shared components (optional)
    description: >-
      Optionally extract shared UI components to shared/ directory.
      Not required - Blueprint code stays in src/, only Factory is separated.
    status: deferred
    estimate: 4h
  - id: move-blueprint
    name: Move Blueprint code to blueprint/ directory (not needed)
    description: >-
      Not needed - Blueprint stays in current src/ and backend/ structure.
      Only Software Factory is physically separated.
    status: deferred
    estimate: 4h
  - id: create-factory-structure
    name: Create Software Factory directory structure
    description: >-
      Create software-factory/ directory with src/ and backend/ subdirectories.
      Set up initial routing and placeholder pages
    status: completed
    estimate: 2h
  - id: mode-switcher
    name: Implement mode switcher in header
    description: >-
      Replace logo with mode switcher component. Toggle between Blueprint/Factory modes.
      Update navigation menu based on mode. Persist preference in localStorage
    status: completed
    estimate: 3h
  - id: factory-backend
    name: Create Software Factory backend
    description: >-
      Create separate Express server for Software Factory on port 3002.
      Set up basic structure with workflow API endpoints.
      Create WebSocket server on port 8081 for execution events
    status: completed
    estimate: 3h
  - id: frontend-api-switching
    name: Implement API base URL switching
    description: >-
      Frontend detects current mode and switches API_BASE and WS_URL accordingly.
      Blueprint mode uses localhost 3001 and ws 8080.
      Factory mode uses localhost 3002 and ws 8081.
    status: completed
    estimate: 1h
related:
  - adr: misc/adr-repository-structure.md
