type: user-story
id: workflow-interpreter
productName: test
version: '1.0'
last_updated: '2026-01-14'
name: Parse and execute workflow definitions
description: >-
  As the system, I need to parse workflow.yaml files and execute steps in order,
  so that designed workflows can be run autonomously.
status: planned
acceptance_criteria:
  - Can load workflow.yaml from workflow store
  - Validates workflow schema before execution
  - Executes steps in topological order (respecting dependencies)
  - Tracks execution state (pending, running, completed, failed)
  - Handles workflow-level errors gracefully
tasks:
  - id: workflow-schema
    name: Define workflow.yaml JSON schema
    description: Create TypeScript types and JSON schema for workflow definition validation
    status: planned
    estimate: 2h
  - id: yaml-parser
    name: Implement workflow YAML parser
    description: Parse and validate workflow.yaml, return typed workflow object
    status: planned
    estimate: 2h
  - id: execution-order
    name: Determine step execution order
    description: Topological sort of steps based on dependencies (for now linear, prepare for DAG)
    status: planned
    estimate: 2h
  - id: state-machine
    name: Implement workflow state machine
    description: Track state transitions - idle, running, paused, completed, failed, aborted
    status: planned
    estimate: 3h
  - id: run-workflow-api
    name: Create POST /api/workflows/:id/run endpoint
    description: API endpoint to trigger workflow execution, returns execution ID
    status: planned
    estimate: 2h
